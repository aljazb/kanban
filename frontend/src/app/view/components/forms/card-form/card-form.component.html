<div class="modal-header">
  <h4 class="modal-title">Create card</h4>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body">

  <form [formGroup]="formCard" (ngSubmit)="onSubmit()">

    <div class="form-group row">
     <label for="in-code" class="col-sm-3 col-form-label">Code</label>
      <div class="col-sm-9">
        <input type="text" name="card-code" class="form-control" id="in-code" placeholder="Code"
                formControlName="code">
      </div>
    </div>

    <div class="form-group row">
     <label for="in-name" class="col-sm-3 col-form-label">Name</label>
      <div class="col-sm-9">
        <input type="text" name="card-name" class="form-control" id="in-name"  placeholder="Name"
                formControlName="name">
      </div>
    </div>

    <div class="form-group row">
      <label for="in-card-type" class="col-sm-3 col-form-label">Type</label>
      <div class="col-sm-9">
        <select name="card-card-type" class="form-control" id="in-card-type" formControlName="cardType">
          <option *ngFor="let c of cardTypeSelection" [ngValue]="c">
            {{c.replace("_", " ")}}
          </option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="in-name" class="col-3 col-form-label">Description</label>
      <div class="col-9">
        <textarea type="text" name="card-description" class="form-control" id="in-description"  placeholder="Description"
                  formControlName="description"></textarea>
      </div>
    </div>

    <div class="form-group row">
      <label for="in-color" class="col-sm-3 col-form-label">Color</label>
      <div class="col-9">
        <input  id="in-color" formControlName="color" type="color"/>
        <div class="invalid-feedback" *ngIf="fcColor.hasError('required')">
          Color is required
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="in-start-date" class="col-3 col-form-label">Due Date</label>
      <div class="col-9" id="in-start-date">
        <div class="input-group">
          <input class="form-control" placeholder="yyyy-mm-dd" #d="ngbDatepicker" name="dp1"
                 formControlName="dueDate" ngbDatepicker>
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
              <img src="https://ng-bootstrap.github.io/img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;"/>
            </button>
          </div>
        </div>
        <div *ngIf="fcDueDate.touched && fcDueDate.invalid">
          <div class="date-invalid-feedback" *ngIf="fcDueDate.hasError('beforeNow')">
            Due date must be after today.
          </div>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="in-workload" class="col-sm-3 col-form-label">Workload</label>
      <div class="col-sm-9">
        <input type="number" name="card-workload" class="form-control" id="in-workload" placeholder="Workload"
               formControlName="workload">
      </div>
    </div>

    <div class="form-group row">
      <label for="in-assigned-to" class="col-sm-3 col-form-label">Assigned to</label>
      <div class="col-sm-9">
        <select name="card-assigned-to" class="form-control" id="in-assigned-to" formControlName="assignedTo"
                [ngClass]="{ 'is-invalid': fcAssignedTo.touched && fcAssignedTo.invalid }">
          <option [ngValue]="null">Select developer</option>
          <option *ngFor="let d of developerSelection" [ngValue]="d.id">
            {{d.email}}
          </option>
        </select>
        <div class="invalid-feedback" *ngIf="fcColor.hasError('required')">
          Color is required
        </div>
      </div>
    </div>


    <div class="form-group row">

        <div class="col-12" *ngIf="isViolatingWip">
          <p class="text-danger">
           Creating new card will break WIP constraint.
          </p>
          <textarea name="card-delete-reason" class="form-control"
                    placeholder="Enter reason for WIP violation"
                    formControlName="reason"
          ></textarea>
        </div>

        <div class="col-12">
          <button type="submit" class="btn btn-primary pull-right ml-3">Submit</button>
        </div>

    </div>


  </form>

</div>
